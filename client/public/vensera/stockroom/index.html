<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raksul Stockroom - Project Documentation</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
            border-radius: 10px;
            text-align: center;
        }
        .section {
            background: white;
            margin-bottom: 2rem;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .section h2 {
            color: #333;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        .section-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }
        .module-card {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 1.5rem;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .module-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .module-card h3 {
            color: #495057;
            margin-top: 0;
        }
        .module-card .file-count {
            background: #667eea;
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 15px;
            font-size: 0.8rem;
            display: inline-block;
        }
        .module-card a {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
        }
        .module-card a:hover {
            text-decoration: underline;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
        }
        .stat-label {
            color: #6c757d;
            font-size: 0.9rem;
        }
        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        .tech-badge {
            background: #e9ecef;
            color: #495057;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
        }
        .navigation {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .nav-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        .nav-link {
            background: #667eea;
            color: white;
            padding: 1rem;
            border-radius: 8px;
            text-decoration: none;
            text-align: center;
            transition: background 0.2s;
        }
        .nav-link:hover {
            background: #5a6fd8;
        }
        .nav-link.disabled {
            background: #6c757d;
            color: #adb5bd;
            cursor: not-allowed;
            opacity: 0.6;
            text-decoration: none;
        }
        .nav-link.disabled:hover {
            background: #6c757d;
            transform: none;
            box-shadow: none;
        }

        /* Chart Styles */
        .chart-section {
            background: white;
            margin-bottom: 2rem;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .chart-container {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }

        .chart-container h3 {
            color: #495057;
            margin-bottom: 1rem;
            text-align: center;
        }

        .chart-container.full-width {
            grid-column: 1 / -1;
        }

        .chart-wrapper {
            position: relative;
            height: 400px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🏗️ Raksul Stockroom</h1>
            <p>Comprehensive Project Documentation</p>
        </div>

        <div class="navigation">
            <h2>📚 Quick Navigation</h2>
            <div class="nav-grid">
                <a href="controllers.html" class="nav-link">🎮 Controllers</a>
                <a href="models.html" class="nav-link">🗄️ Models</a>
                <a href="services.html" class="nav-link">⚙️ Services</a>
                <a href="workers.html" class="nav-link">🔄 Workers</a>
                <a href="policies.html" class="nav-link">🛡️ Policies</a>
                <a href="calculations.html" class="nav-link">🧮 Calculations</a>
                <a href="queries.html" class="nav-link">🔍 Queries</a>
                <a href="serializers.html" class="nav-link">📦 Serializers</a>
                <a href="structure-tree.html" class="nav-link">🌳 Project Tree</a>
                <a href="architecture-health-methodology.html" class="nav-link">📊 Health Metrics</a>
                <a href="#" class="nav-link disabled">📚 Libraries</a>
                <a href="#" class="nav-link disabled">⚙️ Configuration</a>
                <a href="#" class="nav-link disabled">🎨 Frontend</a>
                <a href="#" class="nav-link disabled">🧪 Testing</a>
            </div>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-number">1,907+</div>
                <div class="stat-label">Total Files</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">227+</div>
                <div class="stat-label">Total Directories</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">95%</div>
                <div class="stat-label">Test Coverage</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">206</div>
                <div class="stat-label">Service Files</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">260</div>
                <div class="stat-label">Controllers</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">194</div>
                <div class="stat-label">Models</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">8.4</div>
                <div class="stat-label">Files/Directory</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">75%</div>
                <div class="stat-label">Architecture Health</div>
            </div>
        </div>

        <div class="section">
            <h2>🏗️ Project Architecture</h2>
            <div class="section-grid">
                <div class="module-card">
                    <h3>🎮 Controllers Layer</h3>
                    <p>MVC controllers handling HTTP requests and responses</p>
                    <span class="file-count">128 files</span>
                    <br><br>
                    <a href="controllers.html">View Controllers Documentation →</a>
                </div>
                <div class="module-card">
                    <h3>🗄️ Models Layer</h3>
                    <p>ActiveRecord models with business logic and validations</p>
                    <span class="file-count">159 files</span>
                    <br><br>
                    <a href="models.html">View Models Documentation →</a>
                </div>
                <div class="module-card">
                    <h3>⚙️ Services Layer</h3>
                    <p>Business logic encapsulated in service objects</p>
                    <span class="file-count">70+ directories</span>
                    <br><br>
                    <a href="services.html">View Services Documentation →</a>
                </div>
                <div class="module-card">
                    <h3>🔄 Background Jobs</h3>
                    <p>Sidekiq workers for asynchronous processing</p>
                    <span class="file-count">32 directories</span>
                    <br><br>
                    <a href="workers.html">View Workers Documentation →</a>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>🔧 Supporting Infrastructure</h2>
            <div class="section-grid">
                <div class="module-card">
                    <h3>📚 Libraries & Extensions</h3>
                    <p>Custom libraries, extensions, and utilities</p>
                    <span class="file-count">15+ directories</span>
                    <br><br>
                    <a href="lib.html">View Libraries Documentation →</a>
                </div>
                <div class="module-card">
                    <h3>⚙️ Configuration</h3>
                    <p>Application configuration and settings</p>
                    <span class="file-count">25+ directories</span>
                    <br><br>
                    <a href="config.html">View Configuration Documentation →</a>
                </div>
                <div class="module-card">
                    <h3>🎨 Frontend</h3>
                    <p>Standalone Node.js frontend application</p>
                    <span class="file-count">Webpack + React</span>
                    <br><br>
                    <a href="frontend.html">View Frontend Documentation →</a>
                </div>
                <div class="module-card">
                    <h3>🧪 Testing</h3>
                    <p>Comprehensive test suite with RSpec</p>
                    <span class="file-count">1000+ tests</span>
                    <br><br>
                    <a href="testing.html">View Testing Documentation →</a>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>🌳 Project Structure</h2>
            <div class="section-grid">
                <div class="module-card">
                    <h3>📄 Complete Structure Tree</h3>
                    <p>Visual tree representation of the entire project structure with file counts and directory organization</p>
                    <span class="file-count">1000+ files mapped</span>
                    <br><br>
                    <a href="../structure-tree.md">View Complete Structure Tree →</a>
                </div>
                <div class="module-card">
                    <h3>📊 Architecture Overview</h3>
                    <p>Hierarchical view of all application layers, supporting infrastructure, and technology stack</p>
                    <span class="file-count">Rails MVC + Services</span>
                    <br><br>
                    <a href="../structure-tree.md">View Architecture Details →</a>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>🛠️ Technology Stack</h2>
            <div class="tech-stack">
                <span class="tech-badge">Ruby 3.2.1</span>
                <span class="tech-badge">Rails 6.1.7</span>
                <span class="tech-badge">MySQL 5.7</span>
                <span class="tech-badge">Redis</span>
                <span class="tech-badge">Sidekiq</span>
                <span class="tech-badge">Elasticsearch</span>
                <span class="tech-badge">Bootstrap 4</span>
                <span class="tech-badge">jQuery</span>
                <span class="tech-badge">Stimulus.js</span>
                <span class="tech-badge">GraphQL</span>
                <span class="tech-badge">RSpec</span>
                <span class="tech-badge">Docker</span>
                <span class="tech-badge">AWS</span>
            </div>
        </div>

        <div class="section">
            <h2>📊 Project Overview</h2>
            <p><strong>Raksul Stockroom</strong> is a comprehensive inventory and order management system built with Ruby on Rails. It serves as the backbone for Raksul's printing and e-commerce operations, handling everything from product catalog management to order processing and fulfillment.</p>

            <h3>Key Features:</h3>
            <ul>
                <li><strong>Order Management</strong>: Complete order lifecycle from cart to fulfillment</li>
                <li><strong>Product Catalog</strong>: Extensive product management with SKUs and variants</li>
                <li><strong>Inventory Control</strong>: Real-time inventory tracking and management</li>
                <li><strong>Payment Processing</strong>: Integrated payment gateway with Raksul Pay</li>
                <li><strong>Search & Discovery</strong>: Elasticsearch-powered product search</li>
                <li><strong>Admin Interface</strong>: Comprehensive admin panel for operations</li>
                <li><strong>Background Processing</strong>: Sidekiq for async operations</li>
            </ul>
        </div>

        <!-- Charts Section -->
        <div class="chart-section">
            <h2>📊 Architecture Analytics</h2>
            <p>Visual analysis of project structure and component distribution based on the structure tree data.</p>

            <div class="chart-grid">
                <!-- Bar Chart -->
                <div class="chart-container">
                    <h3>📊 File Distribution by Layer</h3>
                    <div class="chart-wrapper">
                        <canvas id="barChart"></canvas>
                    </div>
                </div>

                <!-- Donut Chart -->
                <div class="chart-container">
                    <h3>🍩 Architecture Proportions</h3>
                    <div class="chart-wrapper">
                        <canvas id="donutChart"></canvas>
                    </div>
                </div>

                <!-- Line Chart -->
                <div class="chart-container full-width">
                    <h3>📈 Code Organization Analysis</h3>
                    <div class="chart-wrapper">
                        <canvas id="lineChart"></canvas>
                    </div>
                </div>

                <!-- Radar Chart -->
                <div class="chart-container">
                    <h3>🕷️ Architecture Health Metrics</h3>
                    <div class="chart-wrapper">
                        <canvas id="radarChart"></canvas>
                    </div>
                </div>

                <!-- Polar Chart -->
                <div class="chart-container">
                    <h3>🎯 Layer Complexity</h3>
                    <div class="chart-wrapper">
                        <canvas id="polarChart"></canvas>
                    </div>
                </div>

                <!-- Complexity Distribution Chart -->
                <div class="chart-container">
                    <h3>🔥 Complexity Distribution</h3>
                    <div class="chart-wrapper">
                        <canvas id="complexityChart"></canvas>
                    </div>
                </div>

                <!-- Technical Debt Chart -->
                <div class="chart-container">
                    <h3>⚠️ Technical Debt Analysis</h3>
                    <div class="chart-wrapper">
                        <canvas id="debtChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Updated data from structure-tree.md (final corrected analysis)
        const layers = [
            'Testing Suite',
            'Controllers Layer',
            'Services Layer',
            'Models Layer',
            'Supporting Infrastructure',
            'Authorization Policies',
            'Background Jobs',
            'Business Calculations',
            'Database Queries',
            'API Serializers'
        ];

        const fileCounts = [1000, 260, 206, 194, 200, 119, 80, 31, 14, 3];
        const directories = [7, 64, 80, 6, 50, 26, 28, 1, 6, 9];

        // Color scheme matching the existing design
        const colors = [
            '#667eea', '#764ba2', '#36A2EB', '#FFCE56', '#4BC0C0',
            '#9966FF', '#FF9F40', '#FF6384', '#C9CBCF', '#4BC0C0', '#36A2EB'
        ];

        const backgroundColors = colors.map(color => color + '80');

        // Bar Chart
        const barCtx = document.getElementById('barChart').getContext('2d');
        new Chart(barCtx, {
            type: 'bar',
            data: {
                labels: layers,
                datasets: [{
                    label: 'Number of Files',
                    data: fileCounts,
                    backgroundColor: backgroundColors,
                    borderColor: colors,
                    borderWidth: 2,
                    borderRadius: 5
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(0,0,0,0.1)'
                        }
                    },
                    x: {
                        ticks: {
                            maxRotation: 45,
                            minRotation: 45
                        },
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });

        // Donut Chart
        const donutCtx = document.getElementById('donutChart').getContext('2d');
        new Chart(donutCtx, {
            type: 'doughnut',
            data: {
                labels: layers,
                datasets: [{
                    data: fileCounts,
                    backgroundColor: colors,
                    borderWidth: 2,
                    borderColor: '#fff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 10,
                            usePointStyle: true,
                            font: {
                                size: 10
                            }
                        }
                    }
                }
            }
        });

        // Line Chart - Files per Directory
        const lineCtx = document.getElementById('lineChart').getContext('2d');
        const filesPerDir = fileCounts.map((files, i) => Math.round((files / directories[i]) * 10) / 10);

        new Chart(lineCtx, {
            type: 'line',
            data: {
                labels: layers,
                datasets: [{
                    label: 'Files per Directory',
                    data: filesPerDir,
                    borderColor: '#667eea',
                    backgroundColor: '#667eea20',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4,
                    pointBackgroundColor: '#667eea',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointRadius: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(0,0,0,0.1)'
                        }
                    },
                    x: {
                        ticks: {
                            maxRotation: 45,
                            minRotation: 45
                        },
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });

        // Polar Area Chart
        const polarCtx = document.getElementById('polarChart').getContext('2d');
        new Chart(polarCtx, {
            type: 'polarArea',
            data: {
                labels: layers.slice(0, 8), // Top 8 layers
                datasets: [{
                    data: fileCounts.slice(0, 8),
                    backgroundColor: colors.slice(0, 8),
                    borderWidth: 2,
                    borderColor: '#fff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 5,
                            usePointStyle: true,
                            font: {
                                size: 10
                            }
                        }
                    }
                },
                scales: {
                    r: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(0,0,0,0.1)'
                        }
                    }
                }
            }
        });

        // Radar Chart - Architecture Health (Updated with new metrics)
        const radarCtx = document.getElementById('radarChart').getContext('2d');
        new Chart(radarCtx, {
            type: 'radar',
            data: {
                labels: [
                    'Test Coverage (95%)',
                    'Code Organization (85%)',
                    'Service Usage (90%)',
                    'Authorization (80%)',
                    'Performance (65%)',
                    'Maintainability (75%)',
                    'Security (85%)',
                    'Documentation (60%)'
                ],
                datasets: [{
                    label: 'Current State',
                    data: [95, 85, 90, 80, 65, 75, 85, 60],
                    borderColor: '#667eea',
                    backgroundColor: '#667eea20',
                    borderWidth: 2,
                    pointBackgroundColor: '#667eea',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2
                }, {
                    label: 'Target State',
                    data: [98, 90, 95, 85, 80, 85, 90, 80],
                    borderColor: '#764ba2',
                    backgroundColor: '#764ba220',
                    borderWidth: 2,
                    pointBackgroundColor: '#764ba2',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    borderDash: [5, 5]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                },
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 100,
                        grid: {
                            color: 'rgba(0,0,0,0.1)'
                        },
                        pointLabels: {
                            font: {
                                size: 10
                            }
                        }
                    }
                }
            }
        });

        // Complexity Distribution Chart
        const complexityCtx = document.getElementById('complexityChart').getContext('2d');
        new Chart(complexityCtx, {
            type: 'doughnut',
            data: {
                labels: [
                    'High Complexity (15%)',
                    'Medium Complexity (45%)',
                    'Low Complexity (40%)'
                ],
                datasets: [{
                    data: [15, 45, 40],
                    backgroundColor: ['#FF6B6B', '#FFD93D', '#6BCF7F'],
                    borderWidth: 2,
                    borderColor: '#fff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 10,
                            usePointStyle: true
                        }
                    }
                }
            }
        });

        // Technical Debt Analysis Chart
        const debtCtx = document.getElementById('debtChart').getContext('2d');
        new Chart(debtCtx, {
            type: 'bar',
            data: {
                labels: [
                    'Large Service Classes',
                    'Complex Controllers',
                    'Missing Tests',
                    'Legacy Code',
                    'Inconsistent Naming',
                    'Duplicate Logic',
                    'Large Models',
                    'Missing Docs'
                ],
                datasets: [{
                    label: 'High Priority',
                    data: [15, 8, 5, 3, 0, 0, 0, 0],
                    backgroundColor: '#FF6B6B80',
                    borderColor: '#FF6B6B',
                    borderWidth: 1
                }, {
                    label: 'Medium Priority',
                    data: [0, 0, 0, 0, 12, 10, 5, 40],
                    backgroundColor: '#FFD93D80',
                    borderColor: '#FFD93D',
                    borderWidth: 1
                }, {
                    label: 'Low Priority',
                    data: [0, 0, 0, 0, 0, 0, 0, 0],
                    backgroundColor: '#6BCF7F80',
                    borderColor: '#6BCF7F',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top'
                    }
                },
                scales: {
                    x: {
                        stacked: true,
                        ticks: {
                            maxRotation: 45,
                            minRotation: 45
                        }
                    },
                    y: {
                        stacked: true,
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(0,0,0,0.1)'
                        }
                    }
                }
            }
        });

        // Add hover effects to chart containers
        document.querySelectorAll('.chart-container').forEach(container => {
            container.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-2px)';
                this.style.transition = 'transform 0.3s ease';
            });

            container.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });
    </script>
</body>
</html>
